<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>第二题</title>
  </head>
  <body>
    <script type="text/javascript">
    var isArray = function (obj) {    // 判断对象是否是数组的标准方法
        return Object.prototype.toString.call(obj) === "[object Array]";
    };

    var getParams = function (query) {
        var pairs,
            map,
            params = {};

        pairs = query.split('&');

        for (var i=0, len=pairs.length; i<len; i++) {
            map = pairs[i].split('=');

            if (map[0] in params) {
                if (isArray(params[map[0]])) {    // 第三次或更多插入
                    params[map[0]].push(map[1]);
                } else {    // 第二次插入
                    params[map[0]] = [params[map[0]], map[1]];
                }
            } else {    // 第一次插入
                params[map[0]] = map[1];
            }
        }
        return params;
    };

    var query1 = 'user=anonymous&id=123&id=456&city=BeiJing';




    console.log(getParams(query1));




    </script>
    </body>

</html>
